Program {
    defs: {
        Path {
            base: "Bitmap",
            children: []
        }: Struct(
            [
                Field {
                    name: "extents",
                    value: Path(
                        Path {
                            base: "Bitmap",
                            children: [
                                "extents"
                            ]
                        }
                    )
                },
                Field {
                    name: "data",
                    value: Array(
                        Path(
                            Path {
                                base: "Pixel",
                                children: []
                            }
                        )
                    )
                }
            ],
            Some(
                Sequence(
                    [
                        Named("extents", Sequence(
                            [
                                Named("width", Apply(
                                    Prim(
                                        "from_u32be",
                                        Arrow(
                                            [
                                                Array(
                                                    U8
                                                )
                                            ],
                                            Int
                                        )
                                    ),
                                    Repeat(
                                        U8,
                                        Exact(
                                            Const(
                                                Int(4)
                                            )
                                        )
                                    )
                                )),
                                Named("height", Apply(
                                    Prim(
                                        "from_u32be",
                                        Arrow(
                                            [
                                                Array(
                                                    U8
                                                )
                                            ],
                                            Int
                                        )
                                    ),
                                    Repeat(
                                        U8,
                                        Exact(
                                            Const(
                                                Int(4)
                                            )
                                        )
                                    )
                                ))
                            ],
                            Struct(
                                Path {
                                    base: "Bitmap",
                                    children: []
                                },
                                [
                                    Field {
                                        name: "width",
                                        value: Var(
                                            Bound(Named("width", BoundVar(1, 0)))
                                        )
                                    },
                                    Field {
                                        name: "height",
                                        value: Var(
                                            Bound(Named("height", BoundVar(0, 0)))
                                        )
                                    }
                                ]
                            )
                        )),
                        Named("data", Repeat(
                            Var(
                                Bound(Named("Pixel", BoundVar(1, 0)))
                            ),
                            Exact(
                                Binop(
                                    Mul,
                                    Proj(
                                        Var(
                                            Bound(Named("extents", BoundVar(0, 0)))
                                        ),
                                        "width"
                                    ),
                                    Proj(
                                        Var(
                                            Bound(Named("extents", BoundVar(0, 0)))
                                        ),
                                        "height"
                                    )
                                )
                            )
                        ))
                    ],
                    Struct(
                        Path {
                            base: "Bitmap",
                            children: []
                        },
                        [
                            Field {
                                name: "extents",
                                value: Var(
                                    Bound(Named("extents", BoundVar(1, 0)))
                                )
                            },
                            Field {
                                name: "data",
                                value: Var(
                                    Bound(Named("data", BoundVar(0, 0)))
                                )
                            }
                        ]
                    )
                )
            )
        ),
        Path {
            base: "Bitmap",
            children: [
                "extents"
            ]
        }: Struct(
            [
                Field {
                    name: "width",
                    value: Int
                },
                Field {
                    name: "height",
                    value: Int
                }
            ],
            None
        ),
        Path {
            base: "Bmp",
            children: []
        }: Alias(
            Path(
                Path {
                    base: "Bitmap",
                    children: []
                }
            )
        ),
        Path {
            base: "Pixel",
            children: []
        }: Struct(
            [
                Field {
                    name: "r",
                    value: U8
                },
                Field {
                    name: "g",
                    value: U8
                },
                Field {
                    name: "b",
                    value: U8
                },
                Field {
                    name: "a",
                    value: U8
                }
            ],
            Some(
                Sequence(
                    [
                        Named("r", U8),
                        Named("g", U8),
                        Named("b", U8),
                        Named("a", U8)
                    ],
                    Struct(
                        Path {
                            base: "Pixel",
                            children: []
                        },
                        [
                            Field {
                                name: "r",
                                value: Var(
                                    Bound(Named("r", BoundVar(3, 0)))
                                )
                            },
                            Field {
                                name: "g",
                                value: Var(
                                    Bound(Named("g", BoundVar(2, 0)))
                                )
                            },
                            Field {
                                name: "b",
                                value: Var(
                                    Bound(Named("b", BoundVar(1, 0)))
                                )
                            },
                            Field {
                                name: "a",
                                value: Var(
                                    Bound(Named("a", BoundVar(0, 0)))
                                )
                            }
                        ]
                    )
                )
            )
        )
    }
}
