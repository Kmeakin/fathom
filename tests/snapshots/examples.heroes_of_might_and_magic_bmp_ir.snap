Program {
    defs: {
        Path {
            base: "HerosOfMightAndMagicBmp",
            children: []
        }: Struct(
            [
                Field {
                    name: "magic",
                    value: Int
                },
                Field {
                    name: "width",
                    value: Int
                },
                Field {
                    name: "height",
                    value: Int
                },
                Field {
                    name: "data",
                    value: Array(
                        U8
                    )
                }
            ],
            Some(
                Sequence(
                    [
                        Named("magic", Apply(
                            Prim(
                                "from_u16le",
                                Arrow(
                                    [
                                        Array(
                                            U8
                                        )
                                    ],
                                    Int
                                )
                            ),
                            Repeat(
                                U8,
                                Exact(
                                    Const(
                                        Int(2)
                                    )
                                )
                            )
                        )),
                        Named("width", Apply(
                            Prim(
                                "from_u16le",
                                Arrow(
                                    [
                                        Array(
                                            U8
                                        )
                                    ],
                                    Int
                                )
                            ),
                            Repeat(
                                U8,
                                Exact(
                                    Const(
                                        Int(2)
                                    )
                                )
                            )
                        )),
                        Named("height", Apply(
                            Prim(
                                "from_u16le",
                                Arrow(
                                    [
                                        Array(
                                            U8
                                        )
                                    ],
                                    Int
                                )
                            ),
                            Repeat(
                                U8,
                                Exact(
                                    Const(
                                        Int(2)
                                    )
                                )
                            )
                        )),
                        Named("data", Repeat(
                            U8,
                            Exact(
                                Binop(
                                    Mul,
                                    Var(
                                        Bound(Named("width", BoundVar(1, 0)))
                                    ),
                                    Var(
                                        Bound(Named("height", BoundVar(0, 0)))
                                    )
                                )
                            )
                        ))
                    ],
                    Struct(
                        Path {
                            base: "HerosOfMightAndMagicBmp",
                            children: []
                        },
                        [
                            Field {
                                name: "magic",
                                value: Var(
                                    Bound(Named("magic", BoundVar(3, 0)))
                                )
                            },
                            Field {
                                name: "width",
                                value: Var(
                                    Bound(Named("width", BoundVar(2, 0)))
                                )
                            },
                            Field {
                                name: "height",
                                value: Var(
                                    Bound(Named("height", BoundVar(1, 0)))
                                )
                            },
                            Field {
                                name: "data",
                                value: Var(
                                    Bound(Named("data", BoundVar(0, 0)))
                                )
                            }
                        ]
                    )
                )
            )
        )
    }
}
