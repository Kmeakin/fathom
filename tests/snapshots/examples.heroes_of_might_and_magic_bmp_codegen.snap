use std::io;
use std::io::prelude::*;

pub struct HerosOfMightAndMagicBmp {
    magic: i64,
    width: i64,
    height: i64,
    data: Vec<u8>,
}

impl HerosOfMightAndMagicBmp {
    fn read<R: Read>(reader: &mut R) -> io::Result<HerosOfMightAndMagicBmp> {
        let data = (0..(width * height)).map(|_| buf.read_u8()?).collect::<Result<_, _>>()?;
        let height = from_u16le((0..2).map(|_| buf.read_u8()?).collect::<Result<_, _>>()?)?;
        let width = from_u16le((0..2).map(|_| buf.read_u8()?).collect::<Result<_, _>>()?)?;
        let magic = from_u16le((0..2).map(|_| buf.read_u8()?).collect::<Result<_, _>>()?)?;
        Ok(HerosOfMightAndMagicBmp {
            magic: magic,
            width: width,
            height: height,
            data: data,
        })
    }
}

