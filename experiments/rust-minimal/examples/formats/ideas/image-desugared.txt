//~ ignore = true

//! A simple image data format.

let pixel : Format =
    let red <- s32be;
    let green <- s32be;
    let blue <- s32Be;
    return
        {
            /// Red value.
            red : U32,
            /// Green value.
            green : U32,
            /// Blue value.
            blue : U32,
        }
        {
            red = red,
            green = green,
            blue = blue,
        };

let image : Format =
    let width <- u32be;
    let height <- u32be;
    let pixels <- array (width * height) pixel;
    return
        {
            /// The width of the image, in pixels.
            width : U32,
            /// The height of the image, in pixels.
            height : U32,
            /// The pixel data.
            pixels : Array (width * height) (Repr pixel),
        }
        {
            width = width,
            height = height,
            pixels = pixels,
        };

image
